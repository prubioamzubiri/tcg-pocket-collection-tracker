import{e as b,aZ as y,a5 as _,as as k,r as o,j as e,f as v,a0 as I,t as M,U as u,a_ as F}from"./index-BPDlz0l9.js";import{F as L}from"./FancyCard-Bx0KYm3V.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],B=b("plus",S),i={};function O({card:a,onImageClick:m,className:x,editable:p=!0}){const{setIsLoginDialogOpen:l}=y(),{setSelectedCardId:h}=_(),d=k(),[n,g]=o.useState(a.amount_owned||0),[C,j]=o.useState(0);o.useEffect(()=>{j(n)},[n]);const c=o.useCallback(async s=>{const t=a.card_id,r=Math.max(0,s);g(r),i[t]&&window.clearTimeout(i[t]),i[t]=window.setTimeout(async()=>{d.mutate({updates:[{card_id:t,internal_id:a.internal_id,amount_owned:r,rarity:a.rarity}]})},1e3)},[n,d,a.card_id]),N=o.useCallback(async()=>{await c(n+1)},[c,l]),f=o.useCallback(async()=>{await c(n-1)},[c,l]),w=async s=>{const t=s.target.value===""?0:Number.parseInt(s.target.value,10);!Number.isNaN(t)&&t>=0&&await c(t)};return e.jsxs("div",{className:v("group flex flex-col items-center rounded-lg",x),children:[e.jsx("button",{type:"button",className:"cursor-pointer",onClick:()=>{h(a.card_id),m?.()},children:e.jsx(L,{card:a,selected:!!a.collected})}),e.jsxs("p",{className:"w-full min-w-0 text-[12px] pt-2 text-center font-semibold leading-tight",children:[e.jsx("span",{className:"block md:inline",children:a.card_id}),e.jsx("span",{className:"hidden md:inline",children:" â€“ "}),e.jsx("span",{className:"block md:inline truncate",children:I(a,M.language)})]}),e.jsx("div",{className:"flex items-center gap-x-1",children:p?e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:f,className:"rounded-full",tabIndex:-1,children:e.jsx(F,{})}),e.jsx("input",{min:"0",max:"99",type:"text",value:C,onChange:w,className:"w-7 text-center border-none rounded",onFocus:s=>s.target.select()}),e.jsx(u,{variant:"ghost",size:"icon",className:"rounded-full",onClick:N,tabIndex:-1,children:e.jsx(B,{})})]}):e.jsx("span",{className:"mt-1",children:n})})]})}export{O as C};

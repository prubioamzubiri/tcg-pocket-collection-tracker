import{r as n,aF as _,aE as H,z as K,j as e,m as I,aG as Y,n as j,C as R,aH as X,D as w,F as W,aS as Z,aT as J,f as S,u as Q,a5 as ee,o as ae,a1 as se,x as te,a7 as oe,a8 as re,a9 as ne,aa as ie,a0 as b,t as C,V as ce,Y as le,Z as de,X as me,aY as k,ab as ue}from"./index-BPDlz0l9.js";import{C as pe}from"./Card-lK7dImDC.js";import{C as xe}from"./CardLine-CbMC9okT.js";import"./FancyCard-Bx0KYm3V.js";var y="Radio",[fe,E]=I(y),[he,ve]=fe(y),D=n.forwardRef((s,t)=>{const{__scopeRadio:r,name:l,checked:i=!1,required:c,disabled:d,value:p="on",onCheck:a,form:x,...f}=s,[m,h]=n.useState(null),u=R(t,g=>h(g)),o=n.useRef(!1),v=m?x||!!m.closest("form"):!0;return e.jsxs(he,{scope:r,checked:i,disabled:d,children:[e.jsx(j.button,{type:"button",role:"radio","aria-checked":i,"data-state":T(i),"data-disabled":d?"":void 0,disabled:d,value:p,...f,ref:u,onClick:w(s.onClick,g=>{i||a?.(),v&&(o.current=g.isPropagationStopped(),o.current||g.stopPropagation())})}),v&&e.jsx(G,{control:m,bubbles:!o.current,name:l,value:p,checked:i,required:c,disabled:d,form:x,style:{transform:"translateX(-100%)"}})]})});D.displayName=y;var P="RadioIndicator",A=n.forwardRef((s,t)=>{const{__scopeRadio:r,forceMount:l,...i}=s,c=ve(P,r);return e.jsx(W,{present:l||c.checked,children:e.jsx(j.span,{"data-state":T(c.checked),"data-disabled":c.disabled?"":void 0,...i,ref:t})})});A.displayName=P;var ge="RadioBubbleInput",G=n.forwardRef(({__scopeRadio:s,control:t,checked:r,bubbles:l=!0,...i},c)=>{const d=n.useRef(null),p=R(d,c),a=Z(r),x=J(t);return n.useEffect(()=>{const f=d.current;if(!f)return;const m=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(m,"checked").set;if(a!==r&&u){const o=new Event("click",{bubbles:l});u.call(f,r),f.dispatchEvent(o)}},[a,r,l]),e.jsx(j.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:p,style:{...i.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});G.displayName=ge;function T(s){return s?"checked":"unchecked"}var je=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],N="RadioGroup",[Ne]=I(N,[_,E]),M=_(),O=E(),[we,Re]=Ne(N),F=n.forwardRef((s,t)=>{const{__scopeRadioGroup:r,name:l,defaultValue:i,value:c,required:d=!1,disabled:p=!1,orientation:a,dir:x,loop:f=!0,onValueChange:m,...h}=s,u=M(r),o=H(x),[v,g]=K({prop:c,defaultProp:i??null,onChange:m,caller:N});return e.jsx(we,{scope:r,name:l,required:d,disabled:p,value:v,onValueChange:g,children:e.jsx(Y,{asChild:!0,...u,orientation:a,dir:o,loop:f,children:e.jsx(j.div,{role:"radiogroup","aria-required":d,"aria-orientation":a,"data-disabled":p?"":void 0,dir:o,...h,ref:t})})})});F.displayName=N;var B="RadioGroupItem",$=n.forwardRef((s,t)=>{const{__scopeRadioGroup:r,disabled:l,...i}=s,c=Re(B,r),d=c.disabled||l,p=M(r),a=O(r),x=n.useRef(null),f=R(t,x),m=c.value===i.value,h=n.useRef(!1);return n.useEffect(()=>{const u=v=>{je.includes(v.key)&&(h.current=!0)},o=()=>h.current=!1;return document.addEventListener("keydown",u),document.addEventListener("keyup",o),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",o)}},[]),e.jsx(X,{asChild:!0,...p,focusable:!d,active:m,children:e.jsx(D,{disabled:d,required:c.required,checked:m,...a,...i,name:c.name,ref:f,onCheck:()=>c.onValueChange(i.value),onKeyDown:w(u=>{u.key==="Enter"&&u.preventDefault()}),onFocus:w(i.onFocus,()=>{h.current&&x.current?.click()})})})});$.displayName=B;var ye="RadioGroupIndicator",L=n.forwardRef((s,t)=>{const{__scopeRadioGroup:r,...l}=s,i=O(r);return e.jsx(A,{...i,...l,ref:t})});L.displayName=ye;var be=F,V=$,U=L;const Ce=be,q=n.forwardRef(({className:s,...t},r)=>e.jsx(V,{ref:r,className:S("w-4 h-4 mr-2 rounded-full bg-neutral-700 hover:bg-neutral-500",s),...t}));q.displayName=V.displayName;const z=n.forwardRef(({className:s,...t},r)=>e.jsx(U,{ref:r,className:S("w-2 h-2 mx-1 xm-auto my-auto rounded-full flex bg-neutral-300",s),...t}));z.displayName=U.displayName;function Ee(){const{t:s}=Q(["pages/card-detail","common/types","common/packs","common/sets"]),{selectedCardId:t,setSelectedCardId:r}=ee(),{data:l=new Map}=ae(),[i,c]=n.useState(!1),[d,p]=n.useState(!1),a=n.useMemo(()=>t===void 0?void 0:se(t),[t]),x=n.useMemo(()=>l.get(a?.internal_id||0),[t]),f=n.useMemo(()=>a?.alternate_versions.map(o=>({card_id:o,amount_owned:l.get(a?.internal_id)?.amount_owned??0})),[a,l]),m=n.useMemo(()=>a===void 0?void 0:te(a?.expansion),[a]);if(n.useEffect(()=>{t&&c(!0)},[t]),t&&!a)return console.log(`Unrecognized card_id: ${t}`),null;if(a&&!m)return console.log(`Unrecognized expansion: ${a.expansion}`),null;const h=a?.pack==="everypack"?m?.packs[0].name:a?.pack,u=o=>new Intl.DateTimeFormat(void 0,{dateStyle:"long",timeStyle:"long"}).format(new Date(o));return e.jsx(oe,{open:!!t&&i,onOpenChange:o=>{o||(c(o),setTimeout(()=>r(void 0),300))},children:e.jsxs(re,{className:"transition-all duration-300 ease-in-out border-slate-600 overflow-y-auto w-full md:w-[725px]",children:[e.jsx(ne,{children:e.jsxs(ie,{children:[a&&b(a,C.language)," ",a?.rarity]})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"px-10 py-4 w-full",children:e.jsx("div",{className:"cursor-pointer",children:a&&e.jsx(pe,{className:"w-full",card:{...a,amount_owned:x?.amount_owned||0},onImageClick:()=>p(!0)},t)})}),e.jsxs(ce,{open:d,onOpenChange:p,children:[e.jsx(le,{className:"hidden",children:e.jsx(de,{children:"Card image dialog"})}),e.jsx(me,{className:"flex items-center justify-center p-0 max-w-3xl max-h-[90vh]",children:a?.image&&e.jsx("img",{src:a.image,alt:b(a,C.language),className:"w-full h-full object-scale-down",onClick:()=>p(!1)})})]}),e.jsxs("div",{className:"p-4 w-full",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h2",{className:"text-xl font-semibold",children:s("text.alternateVersions")}),f&&e.jsxs(Ce,{className:"w-fit",value:t,onValueChange:r,children:[f.map(o=>e.jsxs("label",{className:"flex items-center cursor-pointer",htmlFor:`radio-${o.card_id}`,children:[e.jsx(q,{id:`radio-${o.card_id}`,value:o.card_id,children:e.jsx(z,{})}),e.jsx(xe,{className:"w-auto bg-transparent",card_id:o.card_id,rarity:"w-14",name:"hidden",details:"hidden",amount:"pl-4"})]},o.card_id)),e.jsxs("p",{className:"flex items-baseline mt-1",children:[e.jsxs("span",{className:"mr-4",children:[s("text.totalAmount"),":"]}),e.jsxs("span",{className:"text-neutral-400 ml-auto mr-2",children:["Ã—",f?.reduce((o,v)=>o+v.amount_owned,0)]})]})]})]}),e.jsxs("p",{className:"mt-8 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:s("text.expansion")})," ",a?.expansion]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:s("text.pack")})," ",a&&s(`${a.pack}`,{ns:"common/packs"})]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:"Energy"})," ",a?.energy]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:s("text.weakness")})," ",a&&s(`${a.weakness}`,{ns:"common/types"})||"N/A"]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:s("text.hp")})," ",a?.hp]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:s("text.retreat")})," ",a?.retreat||"N/A"]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:s("text.ability")})," ",a?.ability?.name??e.jsx("i",{children:"None"})]}),a?.ability&&e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:s("text.abilityEffect")})," ",a?.ability.effect]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:s("text.cardType")})," ",a&&s(`cardType.${a.card_type}`)]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:s("text.evolutionType")})," ",a&&s(`evolutionType.${a.evolution_type}`)]}),m&&h&&e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:s("text.chanceToPull",{ns:"pages/card-detail"})}),a&&ue(m,h,a).toFixed(2),"%"]}),a&&k[a.rarity]&&e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:s("text.craftingCost")})," ",k[a.rarity]]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:s("text.artist")})," ",a?.artist]}),e.jsxs("p",{className:"mt-4 text-neutral-400 text-sm flex",children:[e.jsx("strong",{className:"font-semibold mr-1",children:s("text.updated")})," ",x?.updated_at?u(x.updated_at):"N/A"]})]})]})]})})}export{Ee as default};
